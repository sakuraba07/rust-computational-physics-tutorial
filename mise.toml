[tools]
"cargo:mdbook" = "latest"
"cargo:mdbook-mermaid" = "latest"
"cargo:mdbook-typst-math" = "latest"
"cargo:pagefind" = { version = "latest", features = "extended" }
"cargo:lychee" = "latest"

[tasks.clean]
description = "Clean build artifacts"
run = "rm -rf book"

[tasks.build]
description = "Build mdbook and generate search index"
run = """
echo "ğŸ“š Building mdbook..."
mdbook build
echo "âœ… Build completed\n"

echo "ğŸ” Generating search index..."
pagefind --site book
echo "âœ… Index generated\n"

echo "ğŸ”— Checking links..."
lychee book/
echo "âœ… Links checked\n"

echo "ğŸ‰ Done!"
"""

[tasks.server]
description = "Serve the book with a static server"
run = "mdbook server"
